##### 打包准备工作

> 1. 下载项目 
>    ___http://git.zhiaotech.com/apps/mintai.git___
>    ___git@git.zhiaotech.com:apps/mintai.git___
> 2. 切换到当前分支
> 3. 安装依赖文件 ___npm i___
>    lab4 自带 gulp@3.9.1，无需重新安装
> 4. 全局安装 gulp-cli  ___npm i gulp-cli -g___ 
>    运行 ___gulp --version___ 查看是否安装正确
> 5. 运行 ___gulp upload --platform android --build-type release___ 进行打包

##### gulp 打包流程

> 1. ___gulpfile.js___
>    ___lab4/local-cli/lab-gulp.js___ Config.init
>    ___lab4/local-cli/Config.js___ Config.init
> 2. Using gulpfile ~/apps/mintai3/gulpfile.js
> 3. Starting 'upload'...
> 4. ___lab4/local-cli/lab-gulp.js___ gulp.task('upload') ==> function upload ==> function assembleNative
>    ___lab4/local-cli/android.js___ function assemble





> 最新成功打包记录：
>
> 2020-12-23
> [task 修改引入方式](http://git.zhiaotech.com/apps/mintai/commit/afd07691a81909123919c620470b567b30d59a10)
> afd07691a81909123919c620470b567b30d59a10

rm -rf local-cli
rm android/mintai/src/main/java/com/backustech/apps/mintai/PassGuard.java
vim gulpfile.js
vim android/settings.gradle

```
删除
include ':react-native-exit-app'
project(':react-native-exit-app').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-exit-app/android')
```

vim android/mintai/build.gradle

```
删除
compile project(':react-native-exit-app')
```

vim android/mintai/src/main/java/com/backustech/apps/mintai/MainActivity.java

```
 删除
 @Override
  protected String getMainComponentName() {

    return "PwdEditGuard";
  }
```

vim android/mintai/src/main/java/com/backustech/apps/mintai/MainApplication.java

```
删除
import com.github.wumke.RNExitApp.RNExitAppPackage;
new RNExitAppPackage(),
```

vim android/mintai/src/main/java/com/backustech/apps/mintai/passguard/PassGuardPackage.java

```
删除
import com.rntest.module.PassGuardManager;
import com.rntest.module.PwdGuardModule;
```

vim android/mintai/src/main/java/com/backustech/apps/mintai/passguard/PassGuardManager.java

```
添加
import android.support.annotation.NonNull;
删除
import androidx.annotation.NonNull;
```

vim android/mintai/src/main/java/com/backustech/apps/mintai/passguard/PwdGuardModule.java

```
添加
import android.support.annotation.NonNull;
删除
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
```

vim comps/mintai/page/MallIndexPage/MallIndexPage.js

```
删除
import RNExitApp from "react-native-exit-app";
RNExitApp.exitApp();
```

